<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>7 Common Packages for Machine Learning in R | IMAP: Integrated Microbiome Analysis Pipelines</title>
<meta name="author" content="Teresia Mrema-Buza">
<meta name="description" content="7.1 Mikropml Mikropml is a versatile R package tailored specifically for microbiome data analysis and machine learning tasks. It offers a comprehensive suite of tools for preprocessing microbiome...">
<meta name="generator" content="bookdown 0.39 with bs4_book()">
<meta property="og:title" content="7 Common Packages for Machine Learning in R | IMAP: Integrated Microbiome Analysis Pipelines">
<meta property="og:type" content="book">
<meta property="og:url" content="https://tmbuza.github.io/imap-machine-learning/common-packages-for-machine-learning-in-r.html">
<meta property="og:image" content="https://tmbuza.github.io/imap-machine-learning/images/planning.png">
<meta property="og:description" content="7.1 Mikropml Mikropml is a versatile R package tailored specifically for microbiome data analysis and machine learning tasks. It offers a comprehensive suite of tools for preprocessing microbiome...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="7 Common Packages for Machine Learning in R | IMAP: Integrated Microbiome Analysis Pipelines">
<meta name="twitter:description" content="7.1 Mikropml Mikropml is a versatile R package tailored specifically for microbiome data analysis and machine learning tasks. It offers a comprehensive suite of tools for preprocessing microbiome...">
<meta name="twitter:image" content="https://tmbuza.github.io/imap-machine-learning/images/planning.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Sen-0.4.9/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/Bitter-0.4.9/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="End-to-End Practical User Guides Using Integrated Approaches"><big>IMAP:</big> Integrated Microbiome Analysis Pipelines</a>:
        <small class="text-muted">End-to-End Practical User Guides Using Integrated Approaches</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">IMAP-Machine Learning: Predictive Modeling Using Microbiome Data</a></li>
<li class="book-part">ML COMPONENTS</li>
<li><a class="" href="key-components-of-microbiome-machine-learning.html"><span class="header-section-number">1</span> Key Components of Microbiome Machine Learning</a></li>
<li class="book-part">ML FRAMEWORKS</li>
<li><a class="" href="ml-framework_R.html"><span class="header-section-number">2</span> Machine Learning Framework in R: From Data Acquisition to Model Deployment</a></li>
<li class="book-part">CASE STUDY</li>
<li><a class="" href="case-study-applied-machine-learning-for-microbiome-data-analysis.html"><span class="header-section-number">3</span> Case Study: Applied Machine Learning for Microbiome Data Analysis</a></li>
<li><a class="" href="data-for-machine-learning-analysis.html"><span class="header-section-number">4</span> Data for Machine Learning Analysis</a></li>
<li class="book-part">PERFORMANCE METRICS</li>
<li><a class="" href="specificity-and-sensitivity-function.html"><span class="header-section-number">5</span> Specificity and Sensitivity function</a></li>
<li class="book-part">USE CASES IDEAS</li>
<li><a class="" href="case-study-predictive-model-performance-affected-by-information-leakage.html"><span class="header-section-number">6</span> Case Study: Predictive Model Performance Affected by Information Leakage</a></li>
<li><a class="active" href="common-packages-for-machine-learning-in-r.html"><span class="header-section-number">7</span> Common Packages for Machine Learning in R</a></li>
<li><a class="" href="parallelization-training.html"><span class="header-section-number">8</span> Parallelization training</a></li>
<li><a class="" href="exploring-model-performance.html"><span class="header-section-number">9</span> Exploring model performance</a></li>
<li class="book-part">APPENDIX</li>
<li><a class="" href="imap-github-repos.html"><span class="header-section-number">A</span> IMAP GitHub Repos</a></li>
<li><a class="" href="machine-learning-rulegraph.html"><span class="header-section-number">B</span> Machine Learning Rulegraph</a></li>
<li><a class="" href="session-information.html"><span class="header-section-number">C</span> Session Information</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/tmbuza/imap-machine-learning">View book source <i class="fas fa-air-freshener"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="common-packages-for-machine-learning-in-r" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Common Packages for Machine Learning in R<a class="anchor" aria-label="anchor" href="#common-packages-for-machine-learning-in-r"><i class="fas fa-link"></i></a>
</h1>
<div id="mikropml" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Mikropml<a class="anchor" aria-label="anchor" href="#mikropml"><i class="fas fa-link"></i></a>
</h2>
<p>Mikropml is a versatile R package tailored specifically for microbiome data analysis and machine learning tasks. It offers a comprehensive suite of tools for preprocessing microbiome data, constructing predictive models, and assessing their performance. By integrating popular machine learning methods like glmnet and caret, Mikropml provides a seamless workflow for analyzing microbiome datasets and building predictive models customized to address specific research inquiries. In this guide, we will utilize Mikropml, which integrates glmnet and caret, enhancing the efficiency and effectiveness of our machine learning analyses.</p>
</div>
<div id="glmnet" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Glmnet<a class="anchor" aria-label="anchor" href="#glmnet"><i class="fas fa-link"></i></a>
</h2>
<p>Glmnet stands as a cornerstone package in R’s machine learning landscape, primarily utilized for fitting generalized linear models through penalized maximum likelihood. Offering efficient algorithms for implementing regularized regression models, including ridge and lasso regression, Glmnet is invaluable for analyzing high-dimensional data. Its functionalities extend to prediction, model visualization, and cross-validation, rendering it a vital asset in constructing robust and interpretable models.</p>
</div>
<div id="caret" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Caret<a class="anchor" aria-label="anchor" href="#caret"><i class="fas fa-link"></i></a>
</h2>
<p>Caret, short for Classification And REgression Training, emerges as a comprehensive package within R’s machine learning arsenal. Encompassing a broad spectrum of algorithms and techniques spanning classification, regression, and feature selection, Caret provides a unified framework for model training and evaluation. Its user-friendly interface facilitates the comparison of different algorithms and enables efficient parameter tuning. With capabilities ranging from data preprocessing to model visualization, Caret serves as an indispensable tool for practitioners navigating the complexities of machine learning in R.</p>
</div>
<div id="preprocessing-and-transformation" class="section level2" number="7.4">
<h2>
<span class="header-section-number">7.4</span> Preprocessing and transformation<a class="anchor" aria-label="anchor" href="#preprocessing-and-transformation"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span> <span class="va"><a href="https://www.schlosslab.org/mikropml/">mikropml</a></span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"R/genus_pwy_process.R"</span><span class="op">)</span></span>
<span><span class="va">hyper_genus_data</span> <span class="op">&lt;-</span> <span class="va">composite</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">sample_id</span>, <span class="va">taxonomy</span>, <span class="va">rel_abund</span>, <span class="va">hyper</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html">pivot_wider</a></span><span class="op">(</span>names_from<span class="op">=</span><span class="va">taxonomy</span>, values_from <span class="op">=</span> <span class="va">rel_abund</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">sample_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hyper <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span><span class="op">(</span><span class="va">hyper</span>, <span class="st">"hyper"</span>, <span class="st">"healthy"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">hyper</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">hyper_genus_preprocess</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://www.schlosslab.org/mikropml/reference/preprocess_data.html">preprocess_data</a></span><span class="op">(</span><span class="va">hyper_genus_data</span>,</span>
<span>                                        outcome_colname <span class="op">=</span> <span class="st">"hyper"</span><span class="op">)</span><span class="op">$</span><span class="va">dat_transformed</span></span></code></pre></div>
</div>
<div id="tuning-parameters-with-multiple-alpha" class="section level2" number="7.5">
<h2>
<span class="header-section-number">7.5</span> Tuning parameters with multiple alpha<a class="anchor" aria-label="anchor" href="#tuning-parameters-with-multiple-alpha"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_hp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                <span class="co"># lambda = c(0.1, 1, 2, 3, 4, 5, 10))</span></span>
<span>                lambda <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="function-for-model-training" class="section level2" number="7.6">
<h2>
<span class="header-section-number">7.6</span> Function for model training<a class="anchor" aria-label="anchor" href="#function-for-model-training"><i class="fas fa-link"></i></a>
</h2>
<p>Useful terminologies</p>
<ul>
<li>Cross-validation</li>
<li>Used in machine learning for improving model prediction</li>
<li>Useful when we don’t have enough for more efficient methods like the 3-way split (train, validation and test) or a holdout dataset.</li>
<li>
<strong>K-Fold</strong>
<ul>
<li>Is a validation technique</li>
<li>Data is split into k-subsets</li>
<li>Holdout method is repeated k-times where each of the k subsets are used as test set and other k-1 subsets are used for the training purpose.</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_hp_results</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">seed</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="http://www.schlosslab.org/mikropml/reference/run_ml.html">run_ml</a></span><span class="op">(</span><span class="va">hyper_genus_preprocess</span>,</span>
<span>       method<span class="op">=</span><span class="st">"glmnet"</span>,</span>
<span>       outcome_colname <span class="op">=</span> <span class="st">"hyper"</span>,</span>
<span>       kfold <span class="op">=</span> <span class="fl">5</span>,</span>
<span>       cv_times <span class="op">=</span> <span class="fl">100</span>,</span>
<span>       training_frac <span class="op">=</span> <span class="fl">0.8</span>, <span class="co"># training set: 80% </span></span>
<span>       hyperparameters <span class="op">=</span> <span class="va">test_hp</span>, </span>
<span>       seed <span class="op">=</span> <span class="va">seed</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="case-study-predictive-model-performance-affected-by-information-leakage.html"><span class="header-section-number">6</span> Case Study: Predictive Model Performance Affected by Information Leakage</a></div>
<div class="next"><a href="parallelization-training.html"><span class="header-section-number">8</span> Parallelization training</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#common-packages-for-machine-learning-in-r"><span class="header-section-number">7</span> Common Packages for Machine Learning in R</a></li>
<li><a class="nav-link" href="#mikropml"><span class="header-section-number">7.1</span> Mikropml</a></li>
<li><a class="nav-link" href="#glmnet"><span class="header-section-number">7.2</span> Glmnet</a></li>
<li><a class="nav-link" href="#caret"><span class="header-section-number">7.3</span> Caret</a></li>
<li><a class="nav-link" href="#preprocessing-and-transformation"><span class="header-section-number">7.4</span> Preprocessing and transformation</a></li>
<li><a class="nav-link" href="#tuning-parameters-with-multiple-alpha"><span class="header-section-number">7.5</span> Tuning parameters with multiple alpha</a></li>
<li><a class="nav-link" href="#function-for-model-training"><span class="header-section-number">7.6</span> Function for model training</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/tmbuza/imap-machine-learning/blob/gh-pages/03_logistic_regression.Rmd">View source <i class="fas fa-air-freshener"></i></a></li>
          <li><a id="book-edit" href="https://github.com/tmbuza/imap-machine-learning/edit/gh-pages/03_logistic_regression.Rmd">Edit this page <i class="fas fa-air-freshener"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container">
    <div class="row">
      <div class="col-12 col-md-6 mt-3">
        <p><strong><u><a class="text-light" href="https://microbiome.complexdatainsights.com"><big>IMAP:</big> Integrated Microbiome Analysis Pipelines</a></u></strong>: End-to-End Practical User Guides Using Integrated Approaches</p>
<br><p>Authored by Teresia Mrema-Buza, Last updated: <b>2024-04-21</b>.</p>
<br>
</div>
      <div class="col-12 col-md-6 mt-3">
        <p>Note: This practical guide was created using the <a class="text-light" href="https://bookdown.org/yihui/bookdown/">bookdown</a> R package, styled with the modern bs4_book format.</p>
      </div>

    </div>
  </div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
